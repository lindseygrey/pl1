<!DOCTYPE html>
<html>
     <!-- Modified from https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-animate#maps_overlay_symbol_animate-css  -->
  <head>
    <title>Yes this is about Plovers again</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <style>
        #map {
          height: 100%;
        }
        html,
        body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
    </style>
    <script>
       // This example adds an animated symbol to a polyline.
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 44.000, lng: -80.000 },
    zoom: 8,
    mapTypeId: "terrain",
  });
  const DPPcontentString =
    '<div id="content">' +
    '<div id="siteNotice">' +
    "</div>" +
    '<h1 id="firstHeading" class="firstHeading">Darlington Provincial Park Nest</h1>' +
    '<div id="bodyContent">' +
    "<p>Power couple Mrs. Howards and Blue hatched and raised 4 chicks to fledge for the second year running in 2021. While Mrs. Howards flies faithfully south to Fred Howards park each winter, Blue was less then faithful this year and produced unsuccessful nests with two other female plovers on the beach </p>" +
    "</div>" +
    "</div>";
  const DPPinfowindow = new google.maps.InfoWindow({
    content: DPPcontentString,
  });
  const SBcontentString =
    '<div id="content">' +
    '<div id="siteNotice">' +
    "</div>" +
    '<h1 id="firstHeading" class="firstHeading">Darlington Provincial Park Nest</h1>' +
    '<div id="bodyContent">' +
    "<p>Power couple Mrs. Howards and Blue hatched and raised 4 chicks to fledge for the second year running in 2021. While Mrs. Howards flies faithfully south to Fred Howards park each winter, Blue was less then faithful this year and produced unsuccessful nests with two other female plovers on the beach </p>" +
    "</div>" +
    "</div>";
  const SBinfowindow = new google.maps.InfoWindow({
    content: SBcontentString,
  });
  // Define the symbol, using one of the predefined paths ('CIRCLE')
  // supplied by the Google Maps JavaScript API.
  // Changed shape to Arrow instead of circle https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-arrow
  const lineSymbol = {
    path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
    scale: 8,
    strokeColor: "#393",
    strokeOpacity: 1,
  };
   const ArrowSymbol = { //creates arrow symbol for end of line
    path: google.maps.SymbolPath.FORWARD_OPEN_ARROW,
    scale: 8,
   };
 
  // Create the polyline and add the symbol to it via the 'icons' property.
  const line = new google.maps.Polyline({
    path: [
      { lat: 43.868, lng: -78.790 },
      { lat: 28.155, lng: -82.806},
    ],
     strokeOpacity: 0,
     icons: [
      {icon: lineSymbol,
        offset: "0%",},
      {icon: ArrowSymbol,
        offset: "100%",},
        ],
    map: map,
  });
  const DPPmarker = new google.maps.Marker({
    position: { lat: 43.868, lng: -78.790 },
    map,
    title: "Darlington Provincial Park Nest",
  });
  const SBmarker = new google.maps.Marker({
    position: { lat: 44.637, lng: -81.270 },
    map,
    title: "Sauble Beach Nest",
  });
  const WBmarker = new google.maps.Marker({
    position: { lat: 44.526, lng: -80.017 },
    map,
    title: "Wasaga Beach Nest",
  });
  const TTBmarker = new google.maps.Marker({
    position: { lat: 44.564, lng: -79.996 },
    map,
    title: "Tiny Township Nest",
  });
          
    DPPmarker.addListener("click", () => {
      animateCircle(line);
      map.setZoom(8);
      map.setCenter(DPPmarker.getPosition());
      DPPinfowindow.open({
      anchor: DPPmarker,
      map,
      shouldFocus: false,
    });
  });
  SBmarker.addListener("click", () => {
    SBinfowindow.open({
      anchor: SBmarker,
      map,
      shouldFocus: false,
    });
  });

  
}

// Use the DOM setInterval() function to change the offset of the symbol
// at fixed intervals.
function animateCircle(line) {
  let count = 0;

  window.setInterval(() => {
    count = (count + 1) % 200;

    const icons = line.get("icons");

    icons[0].offset = count / 4 + "%";
    line.set("icons", icons);
  }, 20);
}
       </script>
    
  </head>
  <body>
    <div id="map"></div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCM-WWHYHIKY-do4kquMy9Z4wQaQx51AuE&callback=initMap&v=weekly" async>
       </script>
  </body>
</html>
